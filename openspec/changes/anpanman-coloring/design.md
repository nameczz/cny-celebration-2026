## Context

为小朋友做一个面包超人填色游戏，放在 `2026/anpanman-coloring/`。手机横屏使用，触屏友好，后续可扩展更多角色。项目仓库已重构为多项目结构，新项目按约定放入年份目录即可。

## Goals / Non-Goals

**Goals:**
- 实现面包超人填色游戏，触屏点击区域填色
- 强制横屏布局，适配手机
- 角色数据独立，方便后续新增角色
- 纯静态，无需构建

**Non-Goals:**
- 不做自由绘画/涂鸦功能，只做区域填色
- 不做后端保存，填色结果仅在本地
- 不做多人协作
- 首期只做面包超人一个角色

## Decisions

### 1. 用 SVG 做线稿和填色区域

**选择：** SVG path 定义角色各部位，每个 path 是一个可填色区域

**理由：** SVG 天然支持矢量缩放（适配不同屏幕）、每个元素可独立操作颜色、支持点击事件。比 Canvas 更适合"区域填色"场景——不需要 flood fill 算法，直接改 path 的 fill 属性。

**替代方案：**
- Canvas + flood fill：实现复杂，需要像素级操作，性能和边界处理麻烦
- 图片分区 + CSS：不好缩放，区域定义不精确

### 2. 角色数据格式

**选择：** 每个角色一个 JS 文件，导出 SVG path 数据和元信息

```js
// characters/anpanman.js
const anpanman = {
  name: "アンパンマン",
  viewBox: "0 0 400 400",
  regions: [
    { id: "face", path: "M...", defaultColor: "#f5a623", label: "脸" },
    { id: "nose", path: "M...", defaultColor: "#e74c3c", label: "鼻子" },
    // ...
  ]
};
```

**理由：** 结构清晰，新增角色只需加一个文件。`defaultColor` 可用于"参考色"提示或完成后对比。label 用于无障碍和提示。

### 3. 强制横屏布局

**选择：** CSS `@media (orientation: portrait)` 时用 `transform: rotate(90deg)` 旋转整个页面，配合 `screen.orientation.lock('landscape')` API

**理由：** 横屏给填色更大的画布空间。左侧放线稿，右侧或底部放调色板。CSS rotation 是最兼容的方案，orientation lock API 在部分浏览器有支持。

### 4. 页面布局（横屏）

**选择：** 左侧大区域放线稿 SVG，右侧窄栏放调色板和工具按钮

```
┌─────────────────────┬──────┐
│                     │ 🔴   │
│     线稿 SVG        │ 🟡   │
│                     │ 🔵   │
│                     │ 🟢   │
│                     │ ⬜   │
│                     │ ↩️   │
└─────────────────────┴──────┘
```

**理由：** 左侧给线稿最大空间，右侧调色板用大色块方便小朋友点击。撤销按钮放在调色板下方。

### 5. 交互设计

**选择：**
- 点击调色板选色（选中状态高亮）
- 点击/触摸线稿区域填色
- 撤销按钮回退上一步
- 填色完成时弹出庆祝动画

**理由：** 操作步骤极简——选颜色、点区域，两步完成。适合小朋友认知水平。

### 6. 纯 HTML/CSS/JS，不用框架

**选择：** 和 CNY 2026 项目一样，纯静态三件套

**理由：** 项目简单，SVG 操作用原生 DOM API 足够。不引入构建步骤，保持和仓库其他项目一致。

## Risks / Trade-offs

**[SVG path 制作]** → 面包超人的 SVG 线稿需要手动绘制 path 数据，工作量集中在这里。可以用设计工具导出 SVG 再拆分区域。

**[横屏 rotation hack]** → CSS rotation 方案在某些浏览器可能有滚动条或尺寸问题。需要测试主流手机浏览器。降级方案：提示用户旋转手机。

**[触摸精度]** → 小朋友手指粗，小区域（如眼睛）可能难点中。可以适当放大小区域的点击热区。

**[角色版权]** → 面包超人是有版权的角色，仅作个人/家庭使用。
