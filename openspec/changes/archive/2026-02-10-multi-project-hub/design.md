## Context

当前仓库是单项目结构，根目录直接放 `index.html` + `style.css` + `script.js`，通过 Vercel 静态部署。需要重构为多项目集合，同时保持纯静态部署的简洁性，并为未来框架项目预留构建能力。

现有技术栈：纯 HTML/CSS/JS，无构建工具，Vercel 静态托管。

## Goals / Non-Goals

**Goals:**
- 将现有项目无损迁移到 `projects/cny-2026/` 子目录
- 创建主页列表页作为所有子项目的入口
- 配置 Vercel 支持多项目目录结构
- 未来添加新项目只需加一个目录，零配置
- 支持纯 HTML 和框架项目混合共存

**Non-Goals:**
- 不引入 SPA 路由框架（用目录路由即可）
- 不做子项目间的共享状态或通信
- 不为主页引入构建工具（保持纯 HTML）
- 不做旧 URL 的 301 重定向（项目刚起步，无需兼容）

## Decisions

### 1. 按年份目录组织子项目

**选择：** `<year>/<name>/`（如 `2026/cny/`、`2027/xxx/`）

**理由：** 项目天然按年份区分（每年新春、节日等），按年份分目录清晰直观。主页可以按年份分组展示，`ls 2026/` 就能看到当年所有项目。

**替代方案：**
- `projects/<name>/` 扁平目录：项目多了之后不好按时间归类
- 根目录平铺（`/cny-2026/`）：会和配置文件混杂

### 2. 纯目录路由，不用 JS 路由

**选择：** 依赖文件系统路径（`/projects/cny-2026/index.html`）

**理由：** 每个子项目完全独立，不共享运行时。目录路由天然被 Vercel 和所有静态服务器支持，零开发成本。

**替代方案：**
- Hash 路由（`/#/cny-2026`）：需要额外 JS，且子项目内部路由可能冲突
- History API 路由：需要 SPA 框架，过度工程化

### 3. Vercel 配置策略

**选择：** 简化 `vercel.json`，移除显式 `builds`，只保留路由规则

**理由：** Vercel 默认就能处理静态文件，不需要显式列出每种文件类型。只需要一条路由规则处理子目录的 trailing slash 问题（`/2026/cny` → `/2026/cny/index.html`）。

```json
{
  "routes": [
    { "src": "/(\\d{4})/([^/]+)/?$", "dest": "/$1/$2/index.html" }
  ]
}
```

当未来有框架项目需要构建时，再在 Vercel 面板设置 Build Command 为 `npm run build`。

### 4. 主页设计方案

**选择：** 纯 HTML/CSS 卡片列表，手动维护项目列表

**理由：** 项目数量少（个位数级别），手动维护完全够用。避免引入构建步骤去自动扫描 `projects/` 目录。主页风格可以和子项目不同，保持自己的设计。

**替代方案：**
- JS 动态扫描目录：浏览器无法列出目录，需要额外 API 或构建步骤
- 项目配置文件 + 构建生成：过度工程化，项目少的时候没必要

### 5. 框架项目的构建约定

**选择：** 框架项目构建输出到自身目录，根目录 `package.json` 提供统一 build 脚本

**理由：** 每个框架项目自带 `package.json`，根目录脚本检测到就执行 build。纯 HTML 项目没有 `package.json`，自动跳过。简单统一。

**约定：**
- 框架项目的构建输出必须在自身目录内（不能输出到外部）
- 如 Vite 项目：配置 `base: '/<year>/<name>/'`，`outDir: '.'` 或将 dist 内容平铺到项目目录

## Risks / Trade-offs

**[手动维护项目列表]** → 项目多了之后主页需要手动更新。可接受，因为添加新项目本身就需要开发工作，顺手更新主页不是负担。

**[子项目路径变更]** → 现有 CNY 2026 页面 URL 从 `/` 变为 `/2026/cny/`。项目刚起步，外部链接少，影响可控。

**[框架项目的 base path]** → 框架项目需要正确配置 base path（如 Vite 的 `base: '/<year>/<name>/'`），否则资源路径会出错。需要在文档中明确约定。

**[Vercel 构建时间]** → 子项目多了之后统一构建可能变慢。可以按需只构建变更的项目，但目前无需优化。
